{% extends 'root.html' %}
{% load breadcrumbs %}
{% load url from future %}
{% block breadcrumbs %}
    {{ block.super }}
    {% breadcrumb_url "Last.fm Explorer" twothreefall.lastfmexplorer.views.start %}
{% endblock %}
{% block ttle %}
    {% block lextitle %}
    {% endblock %}
    Last.fm Explorer
{% endblock %}
{% block body %}
    <div id='top'>
        <div id='datesandmenu'>
            <div class='float-left'>
                <img src='{{context.user.image}}' alt='Profile image for {{context.user}}' />
            </div>
            <div class='float-left'>
                <h1>Last.fm Explorer &mdash; {{ context.user }}</h1>
                <span id='dates'>{{ context.template.dstart|date:"d/m/Y" }} &ndash; {{ context.template.dend|date:"d/m/Y" }}</span>
                <ul id='topmenu' class='inlinedlist slashseparated'>
                    {% if context.year %}
                        <li>
                            <a href="{% url "lastfmexplorer.views.overview" context.user context.year %}">An overview</a>
                        </li>
                        <li>
                            <a href="{% url "lastfmexplorer.views.user_chart" context.user context.year %}">Charts</a>
                        </li>
                    {% else %}
                        <li>
                            <a href="{% url "lastfmexplorer.views.overview" context.user context.start context.end %}">An overview</a>
                        </li>
                        <li>
                            <a href="{% url "lastfmexplorer.views.user_chart" context.user context.start context.end %}">Charts</a>
                        </li>
                    {% endif %}
                    <li class='last'>
                        <a href="{% url "lastfmexplorer.views.user_data" context.user %}">Week index</a>
                    </li>
                </ul>
            </div>
        </div>
        {% if not context.template.skipped_dates %}
            <div id='dateform'>
                <form id='datechanger' action='#' method='get'>
                    <fieldset>
                        <legend>Configure</legend>
                        <input type='hidden' name='username' value='{{context.user}}' />
                        <input type='hidden' name='original_start' value='{{context.start}}' />
                        <input type='hidden' name='original_end' value='{{context.end}}' />
                        <div class='alignedLabel'>
                            <label class='aligned' for='start-date-picker'>Start:</label>
                            <input id="start-date-picker" name="start" type="text" value="{{ context.template.dstart|date:"d/m/Y" }}"/>
                        </div>
                        <div class='alignedLabel'>
                            <label class='aligned' for='end-date-picker'>End:</label>
                            <input id="end-date-picker" name="end" type="text" value="{{ context.template.dend|date:"d/m/Y" }}"/>
                        </div>
                        {% block lex_page_config %}
                        {% endblock %}
                        <input id='update' type='submit' value='Update' />
                        <div id='dateShortcuts' class='inlinedlistpara'>
                            <p>Or choose:</p>
                            <ul class='commaseparated'>
                                {% for year in context.template.year_shortcuts %}
                                    {% if forloop.last %}
                                        <li class='last'>
                                            <a href="{% url context.template.active_view context.user year %}{{ context.template.getq }}">{{ year }}</a>
                                        </li>
                                    {% else %}
                                        <li><a href="{% url context.template.active_view context.user year %}{{ context.template.getq }}">{{ year }}</a></li>
                                    {% endif %}
                                {% endfor %}
                            </ul>
                            <br />
                            <p>or the last</p>
                            <ul class='commaseparated'>
                                {% for name, s, e in context.template.shortcuts %}
                                    <li><a href="{% url context.template.active_view context.user s e %}{{ context.template.getq }}">{{ name }}</a></li>
                                {% endfor %}
                                <li class='last'>
                                    <a href="{% url context.template.active_view context.user %}{{ context.template.getq }}">All</a>
                                </li>
                            </ul>
                        </div>
                    </fieldset>
                </form>
            </div>
        {% endif %}
    </div>
    <div id='allcontent'>
        {% block content %}
        {% endblock %}
    </div>
{% endblock %}
